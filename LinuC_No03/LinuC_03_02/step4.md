次に少し戻りますが、P.135の`xargs`について学習します。

テキストでは例として`find`した結果を`rm`コマンドで削除していますが、ファイルがなくなると後々面倒なので、ここでは`tar`コマンドを使って体験してみます。

確認ですが、今は第３章の演習用のディレクトリにいますよね。確認してみてください。すでに学習したのでコマンド例は記載しません。

もし、第３章の演習用のディレクトリにいないかたは、カレントディレクトリを第３章の演習用のディレクトリにしてください。同じくコマンド例は記載しません。

ファイルを確認してみます。

`ls -l`{{execute}}

このなかのfile*をアーカイブします。

`tar -cvf test.tar file*`コマンドでも実行できますが、file*が大量に存在する場合はエラーとなります。

そのようなときに`find . -name "file*" | xargs tar -cvf test.tar`のコマンドで実行します。やってみましょう。

`find . -name "file*" | xargs tar -cvf test.tar`

実行できましたね。

ところで、`find . -name "file*" | tar -cvf test.tar`でもできそうな感じがしますね。

実際にやってみましょう。

`find . -name "file*" | tar -cvf test.tar`{{execute}}

エラーになりましたね。パイプは標準出力を次のコマンドに標準入力に渡すというものです。

`tar`コマンドは標準入力から受け付けず、引数に記述してあるファイルを処理しますので、`xargs`コマンドがないとエラーとなります。

`xargs`コマンドは標準入力から受け取った文字列を引数として与えられたコマンドを実行するので、`find . -name "file*" | tar -cvf test.tar`は次のような動きをすることになります。

`find . -name "file*"`の標準出力は"./file5.txt ./file1.txt ./file1 ./file2"となります。パイプで`xargs`に標準入力として渡し`tar`コマンドの引数となります。したがって`tar`コマンドは次のように引数で実行されることになります。`tar -cvf test.tar ./file5.txt ./file1.txt ./file1 ./file2`

`ls`コマンドで確認してみましょう。

`ls file* | wc -l`{{execute}}

file*のファイル数が表示されます。`xargs`コマンドを使うとどうなるでしょうか？

`ls file* | xargs wc -l`{{execute}}

それぞれのファイルの行数が表示されます。

すこしわかりづらいかもしれませんが、`xargs`コマンドが理解できたのではないでしょうか。

